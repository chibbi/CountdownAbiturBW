<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="UTF-8" />

  <title>Abi Countdown</title>
  <link rel="stylesheet" href="default.css" />
  <link rel="stylesheet" href="cddefault.css" />
  <meta name="description" content="Official Website of Raninninn" />
  <meta name="author" content="chibbi" />
  <script data-ad-client="ca-pub-9021480086144976" async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  // written by chibbi
// a simple Dictionary to hold all the Content that should get loaded into the Sites
var siteContent = {
  navbar: {
    logo: '<li style="padding: 0px;"><a href="home"><img src="/pictures/logo.png" alt="Ranininn Logo" style="width:220px;height:220px;"></a></li>',
    //search: "<form action='javascript:searchStart();'><input name='search' type='text' placeholder='Search..'></form>",
    home: '<li><a href="home">Start</a></li>',
    timer: '<li><a href="countdown">Abitur 21 Countdown</a></li>',
    inter: '<li><a href="interpretation">Interpretationen</a></li>',
    ascii: '<li><a href="ascii">ASCII-Art</a></li>',
    about: '<li><a href="home#About">Über Uns</a></li>',
    contact: '<li><a href="home#Contact">Kontakt</a></li>',
    //nextcloud: '<li><a href="/nextcloud/">Nextcloud</a></li>',
    //mail: '<li><a href="/mail">Mail</a></li>',
    //messenger: '<li><a href="/messenger">Messenger</a></li>',
    opensettings: '<input type="button" id="colordefault" class="sitechangenb" value="Öffne Einstellungen" onclick="javascript:showSettings();">',
    divsettingsopen: '<div id="settingsnb">',
    Color: '<input type="color" id="colorpicker" name="colorpicker" value="#F0EBE4" onchange="changeColor()">',
    makedefault: '<input type="button" id="colordefault" class="sitechangenb" value="Farbthema zurücksetzen" onclick="javascript:resetColor();">',
    makelclen: '<input type="button" id="colordefault" class="sitechangenb" value="english" onclick="javascript:changeLang(\'en\');">',
    makelclde: '<input type="button" id="colordefault" class="sitechangenb" value="deutsch" onclick="javascript:changeLang(\'de\');">',
    divsettingsclosed: '</div>',
    Bracket1: '<br>',
  },
  maincontent: {
    consent: "<script>PLACEBO</script>",
  },
  about: {
    DeveloperChib:
      '<div class="workerSingle"><a href="chibbi"><p>Chibbi</p><img src="/pictures/schnabeltier.png" alt="Chibbis Maskottchen" style="width:220px;height:220px;"><p>Backend-Entwickler</p></a></div>',
    DeveloperRan:
      '<div class="workerSingle"><a href="raninn"><p>Raninn</p><img src="/pictures/biebo.png" alt="Raninns Maskottchen" style="width:220px;height:220px;"><p>Placebo</p></a></div>',
    DesignerJoh:
      '<div class="workerSingle"><a href="jojo"><p>Jojo</p><img src="/pictures/duckii.png" alt="Jojos Maskottchen" style="width:220px;height:220px;"><p>Designer</p></a></div>',
    MotivationMo:
      '<div class="workerSingle"><a href="mattEagle"><p>Matt_Eagle</p><img src="/pictures/eagle.png" alt="MattEagles Maskottchen" style="width:220px;height:220px;"><p>Demotivationstrainer</p></a></div>',
  },
};

// Things to start on Site Load
// named loadMaincontent because else i would have to change every single html file
// kinda a hack i know but it is not that bad so it's all fine
// every htmlfile already starts
// loadNavbar()
// loadAbout()
// loadMaincontent()
function loadMaincontent() {
  loadcontent();
  consentCookies();
}

// loads every object from the object "navbar" in the Dictionary into the existing navBar ul Element
function loadNavbar() {
  // loads ul Element
  var obj = document.getElementById("navBar");
  var temp = "";
  // cycles through the objects of "navbar"
  for (var content in siteContent.navbar) {
    // adds those objects to the navbar
    temp += siteContent.navbar[content];
  }
  obj.innerHTML = temp;
}

function loadAbout() {
  // loads div Element
  var obj = document.getElementById("workerList");
  var temp = "";
  // cycles through the objects of "about"
  for (var content in siteContent.about) {
    // adds those objects to the about
    temp += siteContent.about[content];
  }
  obj.innerHTML = temp;
}
// loads every object from the object "maincontent" in the Dictionary into the existing mainContent div Element
function loadcontent() {
  // loads ul Element
  var obj = document.getElementById("Content");
  // cycles through the objects of "maincontent"
  for (var content in siteContent.content) {
    // adds those objects to the maincontent div
    obj.innerHTML += siteContent.content[content];
  }
  document.querySelectorAll("section").forEach(function (p) {
    p.style.backgroundColor = getCookie("color");
  });
}

function getCookie(cname) {
  var name = cname + "=";
  var decodedCookie = decodeURIComponent(document.cookie);
  var ca = decodedCookie.split(";");
  for (var i = 0; i < ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == " ") {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}

function setCookie(cname, cvalue, exdays) {
  var d = new Date();
  d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
  var expires = "expires=" + d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

function getVar() {
  var $_GET = {};
  if (document.location.toString().indexOf('?') !== -1) {
    var query = document.location.toString()
      // get the query string
      .replace(/^.*?\?/, '')
      // and remove any existing hash string
      .replace(/#.*$/, '').split('&');
    for (var i = 0, l = query.length; i < l; i++) {
      var aux = decodeURIComponent(query[i]).split('=');
      $_GET[aux[0]] = aux[1];
    }
  }
  return $_GET;
}

function consentCookies() {
  if (getCookie('cookieconsent') != "true") {
    document.body.innerHTML += '\
          <div class="cookieconsent">\
              Diese Seite nutzt Cookies und sammelt Daten über sie. Durch das weitere Nutzen der Seite, stimmen sie auch der Nutzung von Cookies zu. \
              <button id="coconsent">Ich verstehe</button>\
          </div>\
          ';
    document.querySelector('.cookieconsent #coconsent').onclick = function (e) {
      e.preventDefault();
      console.log("clicked Consenting");
      document.querySelector('.cookieconsent').style.display = 'none';
      setCookie("cookieconsent", "true", 7);
      whichLanguage();
    };
  } else { whichLanguage(); }
}

function whichLanguage() {
  if (getCookie('lcl') == "") {
    document.body.innerHTML += '\
          <div class="locales">\
        This site has different Versions for different Languages. Please specify which Language you want to use.\
        <div class="cookieconsent">\
        This site uses cookies. By continuing to use this website, you agree to their use.\
        <div id="langList" style="flex-direction: row;">\
        <button id="deutsch">Deutsch</button>\
        <button id="english">English</button>\
        </div>\
          </div>\
      ';
    document.querySelector('.locales #deutsch').onclick = function (e) {
      e.preventDefault();
      document.querySelector('.locales').style.display = 'none';
      setCookie("lcl", "de", 365);
      location.reload();
    };
    document.querySelector('.locales #english').onclick = function (e) {
      e.preventDefault();
      document.querySelector('.locales').style.display = 'none';
      setCookie("lcl", "en", 365);
      location.reload();
    };
  }
}

function changeLang(newloc) {
  setCookie("lcl", newloc, 365);
  location.reload();
}

var expanded = false;
function showSettings() {
  var checkboxes = document.getElementById("settingsnb");
  if (!expanded) {
    checkboxes.style.display = "block";
    expanded = true;
  } else {
    checkboxes.style.display = "none";
    expanded = false;
  }
}

function mobileNavbar() {
  var x = document.getElementById("navBardiv");
  if (x.style.display === "block") {
    x.style.display = "none";
  } else {
    x.style.display = "block";
  }
}

function sendMail() {
  var subject = document.getElementsByName("subject");
  var body = document.getElementsByName("comment");
  window.open(
    "mailto:support@example.com,YOURBOT@gmail.com@gmail.com?subject=" +
    subject[0].value +
    "&body=" +
    body[0].value
  );
}

function searchStart() {
  var search = document.getElementsByName("search");
  window.location.replace("/search.html?search=" + search[0].value);
}

function changeColor() {
  document.querySelectorAll("section").forEach(function (p) {
    p.style.backgroundColor = document.getElementById("colorpicker").value;
    setCookie("color", document.getElementById("colorpicker").value, 365);
  });
}

function resetColor() {
  document.querySelectorAll("section").forEach(function (p) {
    p.style.backgroundColor = "#F0EBE4";
    setCookie("color", "#F0EBE4", 365);
  });
}</script>
</head>

<body onload="loadCheckboxes()">
  <div class="navBar">
    <button class="icon" onclick="mobileNavbar();">
      <i class="fa fa-bars"></i>
    </button>
    <div id="navBardiv">
      <ul id="navBar"></ul>
    </div>
  </div>

  <div class="mainContent">
    <div class="multiselect">
      <div class="selectBox" onclick="showCheckboxes()">
        <select>
          <option>Wähle sichtbare Prüfungen aus</option>
        </select>
        <div class="overSelect"></div>
      </div>
      <div id="checkboxes">
        <input type="button" value="Deutsch" onclick="checkVisibility('d')" id="vid" />
        <input type="button" value="Physik" onclick="checkVisibility('ph')" id="viph" />
        <input type="button" value="Wirtschaft" onclick="checkVisibility('w')" id="viw" />
        <input type="button" value="Englisch" onclick="checkVisibility('e')" id="vie" />
        <input type="button" value="Chemie" onclick="checkVisibility('ch')" id="vich" />
        <input type="button" value="Mathe" onclick="checkVisibility('m')" id="vim" />
      </div>
    </div>
    <div class="cdc" id="dc">
      <p class="cdt">Deutsch Prüfung in:</p>
      <p class="cd" id="d"></p>
    </div>
    <div class="cdc" id="phc">
      <p class="cdt">Physik Prüfung in:</p>
      <p class="cd" id="ph"></p>
    </div>
    <div class="cdc" id="wc">
      <p class="cdt">Wirtschaft Prüfung in:</p>
      <p class="cd" id="w"></p>
    </div>
    <div class="cdc" id="ec">
      <p class="cdt">Englisch Prüfung in:</p>
      <p class="cd" id="e"></p>
    </div>
    <div class="cdc" id="chc">
      <p class="cdt">Chemie Prüfung in:</p>
      <p class="cd" id="ch"></p>
    </div>
    <div class="cdc" id="mc">
      <p class="cdt">Mathe Prüfung in:</p>
      <p class="cd" id="m"></p>
    </div>
  </div>
  <script>
    // written by chibbi
var expanded = false;
var red = "white";
var green = "#8FBC8F";

function showCheckboxes() {
    var checkboxes = document.getElementById("checkboxes");
    if (!expanded) {
        checkboxes.style.display = "flex";
        expanded = true;
    } else {
        checkboxes.style.display = "none";
        expanded = false;
    }
}

function loadCheckboxes() {
    var cookies = document.cookie;
    // this section loads every cookie for every timer
    loadCheckbox("d");
    loadCheckbox("w");
    loadCheckbox("ph");
    loadCheckbox("e");
    loadCheckbox("ch");
    loadCheckbox("m");
    // finished loading
}

function loadCheckbox(visibilityBox) {
    // basically searches the cookie string after the given name and if it is
    // false
    buttonID = "vi" + visibilityBox;
    visibilityBox = visibilityBox + "c";
    if (document.cookie.includes("checkBox_" + visibilityBox + "=false")) {
        document.getElementById(visibilityBox).style.display = "none";
        document.getElementById(buttonID).style.backgroundColor = red;
        // or true
    } else if (document.cookie.includes("checkBox_" + visibilityBox + "=true")) {
        document.getElementById(visibilityBox).style.display = "block";
        document.getElementById(buttonID).style.backgroundColor = green;
        // if it is neither false nor true is is made true by default
    } else {
        document.getElementById(visibilityBox).style.display = "block";
        document.cookie = "checkBox_" + visibilityBox + "=true;expires=Mon, 04 Jul 2022 22:44:25 UTC";
    }
}

function checkVisibility(counterID) {
    // Checks if the given Text and Counter should be visible
    buttonID = "vi" + counterID;
    counterID = counterID + "c";
    if (document.getElementById(counterID).style.display == "none") {
        // if yes, it will show them
        document.getElementById(counterID).style.display = "block";
        document.getElementById(buttonID).style.backgroundColor = green;
        document.cookie = "checkBox_" + counterID + "=true;expires=Mon, 04 Jul 2022 22:44:25 UTC";
    } else {
        // if not, it will not show them
        document.getElementById(counterID).style.display = "none";
        document.getElementById(buttonID).style.backgroundColor = red;
        document.cookie = "checkBox_" + counterID + "=false;expires=Mon, 04 Jul 2022 22:44:25 UTC";
    }
}

function countDown(countDownDate, counterID) {
    // Update the count down every 1 second
    var x = setInterval(function () {
        // Get current date and time
        var now = new Date().getTime();

        var duration = countDownDate - now;

        var months = Math.floor(duration / (1000 * 60 * 60 * 24 * 31));
        var days = Math.floor((duration % (1000 * 60 * 60 * 24 * 31)) / (1000 * 60 * 60 * 24));
        var hours = Math.floor((duration % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        var minutes = Math.floor((duration % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((duration % (1000 * 60)) / 1000);

        // Output the result in an element with id=textID
        document.getElementById(counterID).textContent =
            months +
            " Monate, " +
            days +
            " Tage, " +
            hours +
            " Stunden, " +
            minutes +
            " Minuten, " +
            seconds +
            " Sekunden ";

        // If the countdown is over, show it
        if (duration < 0) {
            clearInterval(x);
            document.getElementById(counterID).textContent = "Prüfungstart war bereits.";
        }
    }, 1000);
}
// creates the countdown for every timer
countDown(new Date("May 4, 2021 9:00:00").getTime(), "d");
countDown(new Date("May 6, 2021 9:00:00").getTime(), "ph");
countDown(new Date("May 7, 2021 9:00:00").getTime(), "w");
countDown(new Date("May 10, 2021 9:00:00").getTime(), "e");
countDown(new Date("May 11, 2021 9:00:00").getTime(), "ch");
countDown(new Date("May 17, 2021 9:00:00").getTime(), "m");


// How to create new Dates:
// 1. create new <p></p> Texts (with ids)
// 2. create new Button in DropDown Select Menu
// 3. create new countDown(...)
// 4. create new loadCheckBox(...) in loadCheckBoxes()

// How to change from one Abi to the next
// 1. Change every Date for every Prüfung to the new Date
// 2. Maybe change/increase ExpiringDate
  </script>
  <script>
    loadNavbar();
      // loadMaincontent()
  </script>
</body>

</html>
